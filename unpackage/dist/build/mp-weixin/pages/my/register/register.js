(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/register/register"],{"2e0c":function(e,t,n){"use strict";(function(e){n("78ab");o(n("66fd"));var t=o(n("895f"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"5fdb":function(e,t,n){"use strict";var o=n("d2d2"),r=n.n(o);r.a},8442:function(e,t,n){"use strict";var o={uNavbar:function(){return n.e("node-modules/uview-ui/components/u-navbar/u-navbar").then(n.bind(null,"7a66"))},uForm:function(){return n.e("node-modules/uview-ui/components/u-form/u-form").then(n.bind(null,"02c0"))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-form-item/u-form-item")]).then(n.bind(null,"338e"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-input/u-input")]).then(n.bind(null,"6ef9"))},uImage:function(){return n.e("node-modules/uview-ui/components/u-image/u-image").then(n.bind(null,"3d7c"))},uButton:function(){return n.e("node-modules/uview-ui/components/u-button/u-button").then(n.bind(null,"c1c8"))}},r=function(){var e=this,t=e.$createElement;e._self._c},a=[];n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}))},"895f":function(e,t,n){"use strict";n.r(t);var o=n("8442"),r=n("ba4f");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("5fdb");var i,u=n("f0c5"),s=Object(u["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);t["default"]=s.exports},ba4f:function(e,t,n){"use strict";n.r(t);var o=n("f69e"),r=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},d2d2:function(e,t,n){},f69e:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("a857"),r={data:function(){return{dataForm:{id:0,username:"",password:"",img:"",intro:"",email:""},percent:0,loading:!1,disabled:!1,dataRule:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],intro:[{required:!0,message:"简介不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"}]}}},onLoad:function(e){console.log(e),this.$refs.dataForm.setRules(this.dataRule),this.init(e.id)},methods:{upload:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(n){var r=n.tempFilePaths,a=e.uploadFile({url:o.INTERFACES.imgUpload,filePath:r[0],name:"image",success:function(e){var n=JSON.parse(e.data);t.dataForm.img=n.url,t.disabled=!0,console.log(t.dataForm.img)}});a.onProgressUpdate((function(e){t.percent=e.progress,console.log("上传进度"+e.progress),console.log("已经上传的数据长度"+e.totalBytesSent),console.log("预期需要上传的数据总长度"+e.totalBytesExpectedToSend)}))},error:function(e){console.log(e)}})},init:function(t){var n=this;this.dataForm.id=t||0,this.$nextTick((function(){n.$refs["dataForm"].resetFields(),n.dataForm.id&&e.request({url:o.INTERFACES.userOne+t,method:"get",success:function(e){var t=e.data;t&&0===t.code&&(n.dataForm.username=t.user.username,n.dataForm.password="",n.dataForm.img=t.user.img,n.dataForm.intro=t.user.intro,n.dataForm.email=t.user.email)}})}))},dataFormSubmit:function(){var t=this;this.$refs.dataForm.validate((function(n){n?(e.showLoading({title:"注册中"}),e.request({url:t.dataForm.id?o.INTERFACES.userUpdate:o.INTERFACES.register,data:{id:t.dataForm.id||void 0,username:t.dataForm.username,password:t.dataForm.password,img:t.dataForm.img,intro:t.dataForm.intro,email:t.dataForm.email},method:"POST",success:function(n){if(e.hideLoading(),400===n.data.code)e.showToast({title:"注册失败，该账号已被注册！",icon:"none"}),t.dataForm.username="";else{e.showToast({title:t.dataForm.id?"修改成功！":"注册成功！",icon:"none"});var o=t;setTimeout((function(){e.clearStorage(),o.check()}),1e3)}},fail:function(e,t){console.log("fail"+JSON.stringify(e))}})):console.log("请检查")}))},check:function(){var t=this.checkLogin("/pages/my/index/index",1);if(!t)return e.showToast({title:"请登录！",icon:"none"}),!1}}};t.default=r}).call(this,n("543d")["default"])}},[["2e0c","common/runtime","common/vendor"]]]);