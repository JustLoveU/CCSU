(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c86c2"],{"558d":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",[a("template",{slot:"header"},[a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入标题",clearable:""},model:{value:e.article.title,callback:function(t){e.$set(e.article,"title",t)},expression:"article.title"}})],1),a("el-col",{attrs:{span:6}},[a("el-cascader",{attrs:{placeholder:"请选择菜单",options:e.options,props:{expandTrigger:"hover"}},on:{change:e.handleChange},model:{value:e.article.nav,callback:function(t){e.$set(e.article,"nav",t)},expression:"article.nav"}})],1),a("el-col",{attrs:{span:6}},[[e._v(" 是否设为轮播图 "),a("el-radio-group",{model:{value:e.article.ischart,callback:function(t){e.$set(e.article,"ischart",t)},expression:"article.ischart"}},[a("el-radio",{attrs:{label:0}},[e._v("否")]),a("el-radio",{attrs:{label:1}},[e._v("是")])],1)]],2)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入图片链接",clearable:""},model:{value:e.article.img,callback:function(t){e.$set(e.article,"img",t)},expression:"article.img"}})],1),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入外部链接",clearable:""},model:{value:e.article.url,callback:function(t){e.$set(e.article,"url",t)},expression:"article.url"}})],1)],1)],1),[a("mavon-editor",{ref:"md",on:{imgAdd:e.imgAdd,save:e.saveDoc,change:e.updateDoc},model:{value:e.article.content,callback:function(t){e.$set(e.article,"content",t)},expression:"article.content"}})]],2)},i=[],r=a("b2d8"),c=(a("64e1"),{name:"page2",components:{mavonEditor:r["mavonEditor"]},data:function(){return{fullscreenLoading:!1,article:[{id:"",title:"",img:"",url:"",view:"",content:"",navId:"",ischart:0}],options:[{value:"政策&新论",label:"政策&新论",children:[{value:"国家政策",label:"国家政策"},{value:"学者新论",label:"学者新论"}]},{value:"机构概况",label:"机构概况",children:[{value:"机构简介",label:"机构简介"},{value:"联系方式",label:"联系方式"}]},{value:"动态新闻",label:"动态新闻",children:[{value:"工作动态",label:"工作动态"},{value:"通知公告",label:"通知公告"}]},{value:"学术活动",label:"学术活动"},{value:"科研&服务",label:"科研&服务",children:[{value:"科研项目",label:"科研项目"},{value:"社会服务",label:"社会服务"}]},{value:"平台建设",label:"平台建设"}]}},created:function(){null!==this.$route.query.id&&-1!==this.$route.query.id?(this.getArticle(this.$route.query.id),this.article.id=this.$route.query.id):-1===this.$route.query.id||(this.article=localStorage.article)},methods:{updateDoc:function(e,t){localStorage.article=this.article},saveDoc:function(e,t){var a=this;localStorage.article=this.article,this.$confirm("是否保存文章?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$axios.post("/admin/article/add",{id:a.article.id,title:a.article.title,img:a.article.img,url:a.article.url,content:a.article.content,nav:a.article.nav,ischart:a.article.ischart,view:a.article.view}).then((function(e){a.$notify({title:"成功",message:"添加成功",type:"success"}),a.$router.push({path:"/page1"}),console.log(e.data)})).catch((function(e){a.$notify({title:"失败",message:"添加失败",type:"danger"}),console.log(e)}))}))},getArticle:function(e){var t=this;this.$axios.get("/admin/article/one/"+e).then((function(e){t.article=e.data})).catch((function(e){console.log(e)}))},handleChange:function(e){this.article.nav=e[e.length-1]},imgAdd:function(e,t){var a=this,l=new FormData;l.append("image",t),console.log(l),this.$axios({url:"/admin/article/img",method:"post",data:l,headers:{"Content-Type":"multipart/form-data"}}).then((function(t){console.log(t),a.$refs.md.$img2Url(e,t.data.url)}))}}}),n=c,o=a("2877"),s=Object(o["a"])(n,l,i,!1,null,null,null);t["default"]=s.exports}}]);